{% extends 'dashboard.html' %}
{% block content %}
<div class="section-body">
    <div class="container-fluid">
        <div class="d-flex justify-content-between align-items-center">
            <ul class="nav nav-tabs page-header-tab">
                  <li class="nav-item"><a class="nav-link active" href="{% url 'task_list' %}">Task List</a></li>
            </ul>
        </div>
    </div>
</div>
 <select id="project_tasklist" data-url='{% url "tasklist" %}'>
                    <option disabled = "true" selected> Projects </option>
                        {% for p in projectlist %}
                        <option href="" value={{p.id}} name="id">{{ csrf_input }}{{p.title }}</option>
                        {% endfor %}
                </select>
<div class="section-body mt-3">
    <div class="container-fluid">
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="todo-add" role="tabpanel">
                            <div class="card" id = "card">
                                <div class="card-body">
                                <div class="table-responsive todo_list">
                                    <table class="table table-hover table-striped table-vcenter mb-0 text-nowrap" id="table">
                                        <thead>
                                            <tr>
                                            <th>title</th>
                                            <th class="w">priority</th>
                                            <th class="w">status</th>
                                            <th class="w">date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                            <tr>
                                                <th>{{l.title}}</a></th>
                                                <th> {{l.priority}}</th>
                                                <th> {{l.get_status_display}}</th>
                                                <th> {{l.start_date}}to<br>{{l.end_date}}</th>
                                            </tr>
                                            
                                        </tbody>

                                        </table>
                                   
                                </div>
                            </div>
                                
                            </div>
                        </div>
                    </div>
    </div>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
 <script>
        
        $('#project_tasklist').change(function(){
            var id = $(this).val();
            console.log(id);
            $.ajax({
                url: $(this).data('url'),
            method : 'get',
                data: {
                    'id':id,
                },
                success: function(data){
                   console.log(id);
                   $("#card").html(data);
                },
                error: function(data){
                    console.log("error");
                }
            });
        });

    </script>
{% endblock  %}