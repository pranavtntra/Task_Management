{% extends 'dashboard.html' %}
{% block content %}
<div class="section-body">
    <div class="container-fluid">
        <div class="d-flex justify-content-between align-items-center">
            <ul class="nav nav-tabs page-header-tab">
                  <li class="nav-item"><a class="nav-link active" href="{% url 'task_list' %}">Task List</a></li>
            </ul>
        </div>
    </div>
</div>
 <select id="project_tasklist">
                    <option disabled = "true" selected> Projects </option>
                        {% for p in projectlist %}
                        <option href="{url 'ptask_list'}" value={{p.id}}>{{p.title }}</option>
                        {% endfor %}
                </select>
<div class="section-body mt-3">
    <div class="container-fluid">
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="todo-add" role="tabpanel">
                            <div class="card">
                                <div class="card-body">
                                <div class="table-responsive todo_list">
                                    <table class="table table-hover table-striped table-vcenter mb-0 text-nowrap">
                                        <thead>
                                            <tr>
                                            <th>title</th>
                                            <th class="w">project</th>
                                            <th class="w">priority</th>
                                            <th class="w">status</th>
                                            <th class="w">date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for l in ptask_list %}
                                            <tr>
                                                <th>{{l.title}}</a></th>
                                                <th> {{l.project}}</th>
                                                <th> {{l.priority}}</th>
                                                <th> {{l.get_status_display}}</th>
                                                <th> {{l.start_date}}to<br>{{l.end_date}}</th>
                                            </tr>
                                            {% endfor %}
                                        </tbody>

                                        </table>
                                   
                                </div>
                            </div>
                                
                            </div>
                        </div>
                    </div>
    </div>
 <script>
     $(document).ready(function(){
        
        $('#project_tasklist').change(function(){
            var project = $(this).val();
            console.log('string');
            $.ajax({
                url:"{% url 'project_tasklist' %}",
                type: 'GET',
                data: {
                    'project' : projec
                },
               
                success: function(data){
                   console.log("got it");
                },
                error: function(data){
                    console.log("error");
                }
            });
        });
     });
    </script>
{% endblock  %}